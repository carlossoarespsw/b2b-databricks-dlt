source_catalog: vcn-federated

defaults:
  strategy: incremental
  watermark_column: last_modified

tables:

# =========================
# FINANCIAL_MANAGER
# =========================
- { schema: financial_manager, name: account_payable, keys: [account_payable_id] }
- { schema: financial_manager, name: batch_account_payable, keys: [batch_account_payable_id] }

# =========================
# PUBLIC — CADASTROS (SNAPSHOT)
# =========================
- { schema: public, name: agency, strategy: snapshot }
- { schema: public, name: air, strategy: snapshot }
- { schema: public, name: bank, strategy: snapshot }
- { schema: public, name: city, strategy: snapshot }
- { schema: public, name: country, strategy: snapshot }
- { schema: public, name: state, strategy: snapshot }
- { schema: public, name: card_brand, strategy: snapshot }
- { schema: public, name: merchant_category_code, strategy: snapshot }
- { schema: public, name: permission, strategy: snapshot }
- { schema: public, name: translation_code, strategy: snapshot }

# =========================
# RELACIONAMENTO (SNAPSHOT)
# =========================
- { schema: public, name: role_permission, strategy: snapshot }
- { schema: public, name: system_user_role, strategy: snapshot }
- { schema: public, name: product_attribute, strategy: snapshot }
- { schema: public, name: company_div_system_user, strategy: snapshot }
- { schema: public, name: customer_agency_user_access, strategy: snapshot }

# =========================
# PRINCIPAIS ENTIDADES (INCREMENTAL)
# =========================
- { schema: public, name: company, keys: [company_id] }
- { schema: public, name: company_group, keys: [company_group_id] }
- { schema: public, name: company_division, keys: [company_division_id] }
- { schema: public, name: company_relation, keys: [company_relation_id] }
- { schema: public, name: company_system_user, keys: [company_system_user_id] }
- { schema: public, name: person, keys: [person_id] }
- { schema: public, name: supplier, keys: [supplier_id] }
- { schema: public, name: customer, keys: [customer_id] }
- { schema: public, name: hotel, keys: [hotel_id] }
- { schema: public, name: product, keys: [product_id] }

# =========================
# VCN (INCREMENTAL)
# =========================
- { schema: public, name: vcn_access_token, keys: [vcn_access_token_id] }
- { schema: public, name: vcn_access_token_recipient, keys: [vcn_access_token_recipient_id] }
- { schema: public, name: vcn_access_token_record, keys: [vcn_access_token_record_id] }
- { schema: public, name: vcn_control_group, keys: [vcn_control_group_id] }
- { schema: public, name: vcn_provider, keys: [vcn_provider_id] }
- { schema: public, name: vcn_provider_bank, keys: [vcn_provider_bank_id] }
- { schema: public, name: vcn_provider_card_brand, keys: [vcn_provider_card_brand_id] }
- { schema: public, name: vcn_request, keys: [vcn_request_id] }
- { schema: public, name: vcn_request_draft, keys: [vcn_request_draft_id] }
- { schema: public, name: vcn_request_draft_state, keys: [vcn_request_draft_state_id] }
- { schema: public, name: vcn_request_financial_trans, keys: [vcn_request_financial_trans_id] }
- { schema: public, name: vcn_request_message, keys: [vcn_request_message_id] }
- { schema: public, name: vcn_request_supplier, keys: [vcn_request_supplier_id] }
- { schema: public, name: vcn_template, keys: [vcn_template_id] }
- { schema: public, name: vcn_template_field, keys: [vcn_template_field_id] }

# =========================
# VBI (COLUNA DIFERENTE)
# =========================
- { schema: public, name: vbi_app, watermark_column: last_update, keys: [app_id] }
- { schema: public, name: vbi_supplier, watermark_column: last_update, keys: [supplier_id] }
- { schema: public, name: vbi_vcn_not_used, watermark_column: last_update, keys: [real_card_id, supplier_id, app_id] }

# =========================
# VIEWS → SNAPSHOT
# =========================
- { schema: public, name: vw_vcn_default_custom_fields, strategy: snapshot }
- { schema: public, name: vw_vcn_report_htl_not_used, strategy: snapshot }
- { schema: public, name: vw_fornecedor_aereo, strategy: snapshot }
- { schema: public, name: vw_fornecedor_car, strategy: snapshot }
- { schema: public, name: vw_fornecedor_hotel, strategy: snapshot }
- { schema: public, name: vw_rcn_company, strategy: snapshot }
- { schema: public, name: vw_rcn_template, strategy: snapshot }
